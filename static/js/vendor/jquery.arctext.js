/**
 * Arctext.js
 * A jQuery plugin for curved text
 * http://www.codrops.com
 *
 * Copyright 2011, Pedro Botelho / Codrops
 * Free to use under the MIT license.
 *
 * Date: Mon Jan 23 2012
 */
!function(a,b){function c(b,c,d,e){var h,f=b.text().split(c),g="";f.length&&(a(f).each(function(a,b){h=""," "===b&&(h=" empty",b="&nbsp;"),g+='<span class="'+d+(a+1)+h+'">'+b+"</span>"+e}),b.empty().append(g))}a.fn.fitText=function(b,c){var d={minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY};return this.each(function(){var e=a(this),f=b||1;c&&a.extend(d,c);var g=function(){e.css("font-size",Math.max(Math.min(e.width()/(10*f),parseFloat(d.maxFontSize)),parseFloat(d.minFontSize)))};g(),a(window).resize(g)})};var d={init:function(){return this.each(function(){c(a(this),"","char","")})},words:function(){return this.each(function(){c(a(this)," ","word"," ")})},lines:function(){return this.each(function(){var b="eefec303079ad17405c889e092e105b0";c(a(this).children("br").replaceWith(b).end(),b,"line","")})}};a.fn.lettering=function(b){return b&&d[b]?d[b].apply(this,[].slice.call(arguments,1)):"letters"!==b&&b?(a.error("Method "+b+" does not exist on jQuery.lettering"),this):d.init.apply(this,[].slice.call(arguments,0))},a.Arctext=function(b,c){this.$el=a(c),this._init(b)},a.Arctext.defaults={radius:0,dir:1,rotate:!0,fitText:!1},a.Arctext.prototype={_init:function(b){this.options=a.extend(!0,{},a.Arctext.defaults,b),this._applyLettering(),this.$el.data("arctext",!0),this._calc(),this._rotateWord(),this._loadEvents()},_applyLettering:function(){this.$el.lettering(),this.options.fitText&&this.$el.fitText(),this.$letters=this.$el.find("span").css("display","inline-block")},_calc:function(){return this.options.radius!==-1&&(this._calcBase(),void this._calcLetters())},_calcBase:function(){this.dtWord=0;var b=this;this.$letters.each(function(c){var d=a(this),e=d.outerWidth(!0);b.dtWord+=e,d.data("center",b.dtWord-e/2)});var c=this.dtWord/2;this.options.radius<c&&(this.options.radius=c),this.dtArcBase=this.dtWord;var d=2*Math.asin(this.dtArcBase/(2*this.options.radius));this.dtArc=this.options.radius*d},_calcLetters:function(){var b=this,c=0;this.$letters.each(function(d){var e=a(this),f=e.outerWidth(!0)/b.dtWord*b.dtArc,g=f/b.options.radius,h=b.options.radius*Math.cos(g/2),i=Math.acos((b.dtWord/2-c)/b.options.radius),j=i+g/2,k=Math.cos(j)*h,l=Math.sin(j)*h,m=c+Math.abs(b.dtWord/2-k-c),n=0|m-e.data("center"),o=0|b.options.radius-l,p=b.options.rotate?0|-Math.asin(k/b.options.radius)*(180/Math.PI):0;c=2*m-c,e.data({x:n,y:1===b.options.dir?o:-o,a:1===b.options.dir?p:-p})})},_rotateWord:function(b){if(!this.$el.data("arctext"))return!1;var c=this;this.$letters.each(function(d){var e=a(this),f=c.options.radius===-1?"none":"translateX("+e.data("x")+"px) translateY("+e.data("y")+"px) rotate("+e.data("a")+"deg)",g=b?"all "+(b.speed||0)+"ms "+(b.easing||"linear"):"none";e.css({"-webkit-transition":g,"-moz-transition":g,"-o-transition":g,"-ms-transition":g,transition:g}).css({"-webkit-transform":f,"-moz-transform":f,"-o-transform":f,"-ms-transform":f,transform:f})})},_loadEvents:function(){if(this.options.fitText){var b=this;a(window).on("resize.arctext",function(){b._calc(),b._rotateWord()})}},set:function(a){return!(!a.radius&&!a.dir&&"undefined"===a.rotate)&&(this.options.radius=a.radius||this.options.radius,this.options.dir=a.dir||this.options.dir,a.rotate!==b&&(this.options.rotate=a.rotate),this._calc(),void this._rotateWord(a.animation))},destroy:function(){this.options.radius=-1,this._rotateWord(),this.$letters.removeData("x y a center"),this.$el.removeData("arctext"),a(window).off(".arctext")}};var e=function(a){this.console&&console.error(a)};a.fn.arctext=function(b){if("string"==typeof b){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var d=a.data(this,"arctext");return d?a.isFunction(d[b])&&"_"!==b.charAt(0)?void d[b].apply(d,c):void e("no such method '"+b+"' for arctext instance"):void e("cannot call methods on arctext prior to initialization; attempted to call method '"+b+"'")})}else this.each(function(){var c=a.data(this,"arctext");c||a.data(this,"arctext",new a.Arctext(b,this))});return this}}(jQuery);